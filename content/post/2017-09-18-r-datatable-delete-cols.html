---
title: data.table 中删除列的方法
author: 波
date: '2017-09-18'
slug: data.tablek中删除列的方法
categories: []
tags: []
from_Rmd: yes
---



<p>从 EXCEL 读入到 R 里的数据，经常会存在多余的列。比如下表中的以 <code>X</code> 开头的列：</p>
<pre class="r"><code>library(data.table)
keShi = c(&quot;内科&quot;, NA, NA, &quot;外科&quot;, NA, NA, NA, &quot;儿科&quot;, NA, NA)
set.seed(123)
RenCi = sample(100:1000, length(keShi))
X_1 = rep(&quot;NA&quot;, length(keShi))
X_2 = rep(&quot;NA&quot;, length(keShi))
menJiZhen &lt;- data.table(keShi, RenCi, X_1, X_2)
knitr::kable(menJiZhen)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">keShi</th>
<th align="right">RenCi</th>
<th align="left">X_1</th>
<th align="left">X_2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">内科</td>
<td align="right">514</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">562</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">278</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">外科</td>
<td align="right">625</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">294</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">917</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">217</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">儿科</td>
<td align="right">398</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">328</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">343</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>包作者推荐的删除多余列的方式是这样的：</p>
<pre class="r"><code>colsToDelete &lt;- c(&quot;X_1&quot;, &quot;X_2&quot;)
menJiZhen[, (colsToDelete) := NULL]
knitr::kable(menJiZhen)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">keShi</th>
<th align="right">RenCi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">内科</td>
<td align="right">514</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">562</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">278</td>
</tr>
<tr class="even">
<td align="left">外科</td>
<td align="right">625</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">294</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">917</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">217</td>
</tr>
<tr class="even">
<td align="left">儿科</td>
<td align="right">398</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">328</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">343</td>
</tr>
<tr class="odd">
<td align="left">参考：[R</td>
<td align="right">emoving multiple columns from R data.table with parameter for columns to remove](<a href="https://stackoverflow.com/questions/24590341/removing-multiple-columns-from-r-data-table-with-parameter-for-columns-to-remove" class="uri">https://stackoverflow.com/questions/24590341/removing-multiple-columns-from-r-data-table-with-parameter-for-columns-to-remove</a>)</td>
</tr>
</tbody>
</table>
